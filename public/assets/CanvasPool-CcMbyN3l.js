import{En as e,Yt as t,bt as n,wt as r,zt as i}from"./Filter-BEjgMG_t.js";var a={};function o(e,t,n){let r=2166136261;for(let n=0;n<t;n++)r^=e[n].uid,r=Math.imul(r,16777619),r>>>=0;return a[r]||s(e,t,r,n)}function s(e,t,r,o){let s={},c=0;for(let n=0;n<o;n++){let r=n<t?e[n]:i.EMPTY.source;s[c++]=r.source,s[c++]=r.style}let l=new n(s);return a[r]=l,l}var c=class{constructor(e){this._canvasPool=Object.create(null),this.canvasOptions=e||{},this.enableFullScreen=!1}_createCanvasAndContext(e,t){let n=r.get().createCanvas();return n.width=e,n.height=t,{canvas:n,context:n.getContext(`2d`)}}getOptimalCanvasAndContext(e,n,r=1){e=Math.ceil(e*r-1e-6),n=Math.ceil(n*r-1e-6),e=t(e),n=t(n);let i=(e<<17)+(n<<1);this._canvasPool[i]||(this._canvasPool[i]=[]);let a=this._canvasPool[i].pop();return a||=this._createCanvasAndContext(e,n),a}returnCanvasAndContext(e){let{width:t,height:n}=e.canvas,r=(t<<17)+(n<<1);e.context.resetTransform(),e.context.clearRect(0,0,t,n),this._canvasPool[r].push(e)}clear(){this._canvasPool={}}},l=new c;e.register(l);export{c as n,o as r,l as t};