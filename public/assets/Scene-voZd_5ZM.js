import{t as e}from"./index-CKLn11b_.js";function t(e=document){let t=Array.from(e.querySelectorAll(`img.lazy`));if(!(`IntersectionObserver`in window)){t.forEach(e=>e.src=e.dataset.src);return}let n=new IntersectionObserver(e=>{for(let t of e)if(t.isIntersecting){let e=t.target;e.src=e.dataset.src,e.classList.remove(`lazy`),n.unobserve(e)}},{root:e,rootMargin:`200px`});t.forEach(e=>n.observe(e))}var n=class{constructor(){this.root=null,this.eventHandlers=new Map}async onEnter(e){this.root=e,e.innerHTML=await this.getHTML(),t(e),await this.initUI(e)}onExit(){this.eventHandlers.forEach(({element:e,event:t,handler:n})=>{e.removeEventListener(t,n)}),this.eventHandlers.clear(),this.root=null}on(e,t,n){e.addEventListener(t,n),this.eventHandlers.set(`${t}-${Math.random()}`,{element:e,event:t,handler:n})}onClick(e,t){this.on(this.root,`click`,n=>{let r=n.target.closest(e);r&&t(n,r)})}async getHTML(){throw Error(`getHTML() must be implemented by subclass`)}async initUI(e){}async withLoading(t){return e.wrap(t)}};export{n as t};