const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./lib-CSlSXy_K.js","./Filter-BEjgMG_t.js","./DOMContainer-BHNsiAfU.js","./FilterSystem-DrHbQy25.js","./CanvasPool-CcMbyN3l.js","./SharedSystems-BiYNgiaQ.js","./WebGLRenderer-DMVCX7Hw.js","./WebGPURenderer-DyQmMnaz.js","./DashboardScene-Dq0XPb_B.js","./Scene-6Sn1BImB.js","./DashboardScene-Dr1GV7uU.css","./MarketplaceScene-CZLaIHO_.js","./assetRegistry-B3bpuhkC.js","./MarketplaceScene-XS-qJU7b.css","./ProfessorScene-OLP9vUyh.js","./MessageBox-B-ocjRWL.js","./ProfessorScene-GWLJh_VK.css","./LoginScene-DnBfhSlr.js","./auth-B8qqHQR6.css","./RegisterScene-D7yfzxnX.js","./AdminScene-DKGWDW1x.js","./AdminScene-DYFm15qW.css","./InventoryScene-ChrceyUo.js","./InventoryScene-D5IKlvL8.css","./IncubatorScene-BDUXUQ2h.js","./IncubatorScene--0R60BjK.css"])))=>i.map(i=>d[i]);
(function(){let e=document.createElement(`link`).relList;if(e&&e.supports&&e.supports(`modulepreload`))return;for(let e of document.querySelectorAll(`link[rel="modulepreload"]`))n(e);new MutationObserver(e=>{for(let t of e)if(t.type===`childList`)for(let e of t.addedNodes)e.tagName===`LINK`&&e.rel===`modulepreload`&&n(e)}).observe(document,{childList:!0,subtree:!0});function t(e){let t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),e.crossOrigin===`use-credentials`?t.credentials=`include`:e.crossOrigin===`anonymous`?t.credentials=`omit`:t.credentials=`same-origin`,t}function n(e){if(e.ep)return;e.ep=!0;let n=t(e);fetch(e.href,n)}})();var e=`modulepreload`,t=function(e,t){return new URL(e,t).href},n={};const r=function(r,i,a){let o=Promise.resolve();if(i&&i.length>0){let r=document.getElementsByTagName(`link`),s=document.querySelector(`meta[property=csp-nonce]`),c=s?.nonce||s?.getAttribute(`nonce`);function l(e){return Promise.all(e.map(e=>Promise.resolve(e).then(e=>({status:`fulfilled`,value:e}),e=>({status:`rejected`,reason:e}))))}o=l(i.map(i=>{if(i=t(i,a),i in n)return;n[i]=!0;let o=i.endsWith(`.css`),s=o?`[rel="stylesheet"]`:``;if(a)for(let e=r.length-1;e>=0;e--){let t=r[e];if(t.href===i&&(!o||t.rel===`stylesheet`))return}else if(document.querySelector(`link[href="${i}"]${s}`))return;let l=document.createElement(`link`);if(l.rel=o?`stylesheet`:e,o||(l.as=`script`),l.crossOrigin=``,l.href=i,c&&l.setAttribute(`nonce`,c),document.head.appendChild(l),o)return new Promise((e,t)=>{l.addEventListener(`load`,e),l.addEventListener(`error`,()=>t(Error(`Unable to preload CSS for ${i}`)))})}))}function s(e){let t=new Event(`vite:preloadError`,{cancelable:!0});if(t.payload=e,window.dispatchEvent(t),!t.defaultPrevented)throw e}return o.then(e=>{for(let t of e||[])t.status===`rejected`&&s(t.reason);return r().catch(s)})};var i=class{constructor(){this.app=null,this.particles=[],this.PIXI=null}async init(e){return this.app?this.app:(this.PIXI||=await r(()=>import(`./lib-CSlSXy_K.js`),__vite__mapDeps([0,1,2,3,4,5,6,7]),import.meta.url),this.app=new this.PIXI.Application,await this.app.init({background:658983,resizeTo:e,antialias:!0}),this.app.canvas.style.position=`absolute`,this.app.canvas.style.top=`0`,this.app.canvas.style.left=`0`,this.app.canvas.style.zIndex=`-1`,e.prepend(this.app.canvas),this.createParticles(),this.app.ticker.add(()=>this.animate()),this.app)}createParticles(){for(let e=0;e<25;e++){let e=new this.PIXI.Graphics,t=Math.random()*64+1,n=[3447003,3066993,10181046,15965202][Math.floor(Math.random()*4)];e.circle(0,0,t),e.fill({color:n,alpha:.6});let r={graphics:e,x:Math.random()*this.app.screen.width,y:Math.random()*this.app.screen.height,vx:(Math.random()-.5)*.5,vy:(Math.random()-.5)*.5,size:t};e.x=r.x,e.y=r.y,this.app.stage.addChild(e),this.particles.push(r)}}animate(){let e=this.app.screen.width,t=this.app.screen.height;this.particles.forEach(n=>{n.x+=n.vx,n.y+=n.vy,n.x<0&&(n.x=e),n.x>e&&(n.x=0),n.y<0&&(n.y=t),n.y>t&&(n.y=0),n.graphics.x=n.x,n.graphics.y=n.y})}destroy(){this.app&&=(this.app.destroy(!0),null)}};const a=new class{constructor(){this.element=null,this.progressBar=null,this.loadingQueue=0,this.init()}init(){this.element=document.createElement(`div`),this.element.className=`loading-indicator`,this.element.innerHTML=`
      <div class="loading-indicator__bar"></div>
    `,document.body.appendChild(this.element),this.progressBar=this.element.querySelector(`.loading-indicator__bar`)}show(){this.loadingQueue++,this.loadingQueue===1&&(this.element.classList.add(`loading-indicator--visible`),this.progressBar.style.width=`0%`,setTimeout(()=>{this.progressBar.style.width=`99%`},100))}hide(){this.loadingQueue=Math.max(0,this.loadingQueue-1),this.loadingQueue===0&&(this.element.classList.remove(`loading-indicator--visible`),setTimeout(()=>{this.progressBar.style.width=`0%`},200))}async wrap(e){this.show();try{return await e()}finally{this.hide()}}},o={scenes:new Map,instances:new Map,current:null,container:null,router:null,cutsceneMode:!1,init(e,t=null){this.container=e,this.router=t},register(e,t,n=null){if(this.scenes.set(e,t),this.router){let t=n||this.generatePath(e);this.router.register(t,e)}},generatePath(e){return e===`dashboard`||e===`home`?`/`:{market:`/marketplace`}[e]||`/${e}`},async goTo(e,t=!0){a.show();try{let n=this.scenes.get(e);if(!n)throw Error(`Scene not found: `+e);let r=n;if(typeof n==`function`&&!n.prototype){let e=await n();r=e.default||Object.values(e)[0]}let i=this.instances.get(e);if(i||(i=new r,this.instances.set(e,i)),this.current&&this.current.onExit(),this.container.innerHTML=``,this.current=i,await i.onEnter(this.container),t&&this.router){let t=this.router.getPathByScene(e);t&&t!==this.router.currentPath&&window.history.pushState({},``,t)}}finally{a.hide()}},_applyCutsceneMode(e){this.cutsceneMode=e;let t=document.querySelector(`#navbar-container`),n=document.querySelector(`#scene-outlet`);if(!t){console.warn(`SceneManager: #navbar-container no encontrado`);return}e?(t.classList.add(`navbar-container--hidden`),n&&n.classList.add(`cutscene-mode`)):(t.classList.remove(`navbar-container--hidden`),n&&n.classList.remove(`cutscene-mode`))}},s={gold:0,eggs:[],candies:[],stones:[],chigos:[],eggTypes:[],candyTypes:[],stoneTypes:[],chigoSpecies:[],user:null,token:null};var c=`/api`;const l={async getEggTypes(){try{let e=await fetch(`${c}/egg-types`,{headers:b()});if(!e.ok)throw Error(`Failed to fetch egg types`);let t=await e.json();return s.eggTypes=t,t}catch(e){return console.error(`Error loading egg types:`,e),s.eggTypes||[]}},async getUserEggs(e=null){if(!s.user?.id)return[];try{let t=`${c}/users/${s.user.id}/eggs`;e&&(t+=`?status=${e}`);let n=await fetch(t,{headers:b()});if(!n.ok)throw Error(`Failed to fetch user eggs`);let r=await n.json();return s.eggs=r,r}catch(e){return console.error(`Error loading user eggs:`,e),s.eggs||[]}},async startIncubation(e,t={}){try{let n=await fetch(`${c}/users/${s.user.id}/eggs/${e}/incubate`,{method:`POST`,headers:b(),body:JSON.stringify({careParams:t})}),r=await n.json();return n.ok&&r.success?(await this.getUserEggs(),{success:!0,egg:r.egg}):{success:!1,error:r.error}}catch(e){return console.error(`Error starting incubation:`,e),{success:!1,error:`Error de conexi贸n`}}},async updateCareParams(e,t){try{return await(await fetch(`${c}/users/${s.user.id}/eggs/${e}/care`,{method:`PUT`,headers:b(),body:JSON.stringify({careParams:t})})).json()}catch(e){return console.error(`Error updating care params:`,e),{success:!1,error:`Error de conexi贸n`}}},async hatchEgg(e){try{let t=await fetch(`${c}/users/${s.user.id}/eggs/${e}/hatch`,{method:`POST`,headers:b()}),n=await t.json();return t.ok&&n.success?(await this.getUserEggs(),{success:!0,egg:n.egg,chigo:n.chigo}):{success:!1,error:n.error}}catch(e){return console.error(`Error hatching egg:`,e),{success:!1,error:`Error de conexi贸n`}}},getInventoryEggs(){return(s.eggs||[]).filter(e=>e.status===`inventory`)},getIncubatingEggs(){return(s.eggs||[]).filter(e=>e.status===`incubating`)}};var u=`/api`;const d={async getCandyTypes(){try{let e=await fetch(`${u}/candy-types`,{headers:b()});if(!e.ok)throw Error(`Failed to fetch candy types`);let t=await e.json();return s.candyTypes=t,t}catch(e){return console.error(`Error loading candy types:`,e),s.candyTypes||[]}},async getBuyableCandyTypes(){try{let e=await fetch(`${u}/candy-types/buyable`,{headers:b()});if(!e.ok)throw Error(`Failed to fetch buyable candy types`);return await e.json()}catch(e){return console.error(`Error loading buyable candy types:`,e),[]}},async getUserCandies(){if(!s.user?.id)return[];try{let e=await fetch(`${u}/users/${s.user.id}/candies`,{headers:b()});if(!e.ok)throw Error(`Failed to fetch user candies`);let t=await e.json();return s.candies=t,t}catch(e){return console.error(`Error loading user candies:`,e),s.candies||[]}},async buyCandy(e,t=1){try{let n=await fetch(`${u}/marketplace/buy-candy`,{method:`POST`,headers:b(),body:JSON.stringify({userId:s.user.id,candyTypeId:e,quantity:t})}),r=await n.json();return n.ok&&r.success?(s.gold=r.newGold,await this.getUserCandies(),{success:!0,...r}):{success:!1,error:r.error}}catch(e){return console.error(`Error buying candy:`,e),{success:!1,error:`Error de conexi贸n`}}},async useCandy(e,t){try{let n=await fetch(`${u}/users/${s.user.id}/candies/use`,{method:`POST`,headers:b(),body:JSON.stringify({candyTypeId:e,chigoId:t})}),r=await n.json();return n.ok&&r.success?(await this.getUserCandies(),{success:!0,...r}):{success:!1,error:r.error}}catch(e){return console.error(`Error using candy:`,e),{success:!1,error:`Error de conexi贸n`}}},getCandyQuantity(e){let t=(s.candies||[]).find(t=>t.candy_type_id===e);return t?t.quantity:0},hasCandy(e){return this.getCandyQuantity(e)>0}};var f=`/api`;const p={async getStoneTypes(){try{let e=await fetch(`${f}/stone-types`,{headers:b()});if(!e.ok)throw Error(`Failed to fetch stone types`);let t=await e.json();return s.stoneTypes=t,t}catch(e){return console.error(`Error loading stone types:`,e),s.stoneTypes||[]}},async getBuyableStoneTypes(){try{let e=await fetch(`${f}/stone-types/buyable`,{headers:b()});if(!e.ok)throw Error(`Failed to fetch buyable stone types`);return await e.json()}catch(e){return console.error(`Error loading buyable stone types:`,e),[]}},async getUserStones(){if(!s.user?.id)return[];try{let e=await fetch(`${f}/users/${s.user.id}/stones`,{headers:b()});if(!e.ok)throw Error(`Failed to fetch user stones`);let t=await e.json();return s.stones=t,t}catch(e){return console.error(`Error loading user stones:`,e),s.stones||[]}},async buyStone(e,t=1){try{let n=await fetch(`${f}/marketplace/buy-stone`,{method:`POST`,headers:b(),body:JSON.stringify({userId:s.user.id,stoneTypeId:e,quantity:t})}),r=await n.json();return n.ok&&r.success?(s.gold=r.newGold,await this.getUserStones(),{success:!0,...r}):{success:!1,error:r.error}}catch(e){return console.error(`Error buying stone:`,e),{success:!1,error:`Error de conexi贸n`}}},async equipStone(e,t){try{let n=await fetch(`${f}/users/${s.user.id}/stones/equip`,{method:`POST`,headers:b(),body:JSON.stringify({stoneTypeId:e,chigoId:t})}),r=await n.json();return n.ok&&r.success?(await this.getUserStones(),{success:!0,...r}):{success:!1,error:r.error}}catch(e){return console.error(`Error equipping stone:`,e),{success:!1,error:`Error de conexi贸n`}}},getStoneQuantity(e){let t=(s.stones||[]).find(t=>t.stone_type_id===e);return t?t.quantity:0},hasStone(e){return this.getStoneQuantity(e)>0}};var m=`/api`;const h={async getChigoSpecies(){try{let e=await fetch(`${m}/chigo-species`,{headers:b()});if(!e.ok)throw Error(`Failed to fetch chigo species`);let t=await e.json();return s.chigoSpecies=t,t}catch(e){return console.error(`Error loading chigo species:`,e),s.chigoSpecies||[]}},async getUserChigos(){if(!s.user?.id)return[];try{let e=await fetch(`${m}/users/${s.user.id}/chigos`,{headers:b()});if(!e.ok)throw Error(`Failed to fetch user chigos`);let t=await e.json();return s.chigos=t,t}catch(e){return console.error(`Error loading user chigos:`,e),s.chigos||[]}},async getChigo(e){try{let t=await fetch(`${m}/users/${s.user.id}/chigos/${e}`,{headers:b()});if(!t.ok)throw Error(`Failed to fetch chigo`);return await t.json()}catch(e){return console.error(`Error fetching chigo:`,e),null}},async setNickname(e,t){try{let n=await fetch(`${m}/users/${s.user.id}/chigos/${e}/nickname`,{method:`PUT`,headers:b(),body:JSON.stringify({nickname:t})}),r=await n.json();return n.ok&&r.success?(await this.getUserChigos(),{success:!0}):{success:!1,error:r.error}}catch(e){return console.error(`Error setting nickname:`,e),{success:!1,error:`Error de conexi贸n`}}},async releaseChigo(e){try{let t=await fetch(`${m}/users/${s.user.id}/chigos/${e}`,{method:`DELETE`,headers:b()}),n=await t.json();return t.ok&&n.success?(await this.getUserChigos(),{success:!0}):{success:!1,error:n.error}}catch(e){return console.error(`Error releasing chigo:`,e),{success:!1,error:`Error de conexi贸n`}}},async getChigoStones(e){try{let t=await fetch(`${m}/users/${s.user.id}/chigos/${e}/stones`,{headers:b()});if(!t.ok)throw Error(`Failed to fetch chigo stones`);return await t.json()}catch(e){return console.error(`Error fetching chigo stones:`,e),[]}},getChigoCount(){return(s.chigos||[]).length},getLocalChigo(e){return(s.chigos||[]).find(t=>t.uuid===e)}};var g=`/auth`,_=`tsukuyomi_auth`;async function v(){await Promise.all([l.getUserEggs(),d.getUserCandies(),p.getUserStones(),h.getUserChigos()])}const y={async login(e,t){try{let n=await fetch(`${g}/login`,{method:`POST`,headers:{"Content-Type":`application/json`},body:JSON.stringify({email:e,password:t})}),r=await n.json();return n.ok?(this._saveSession(r.token,r.user),await v(),{success:!0}):{success:!1,error:r.error||`Error al iniciar sesi贸n`}}catch(e){return console.error(`Login error:`,e),{success:!1,error:`Error de conexi贸n`}}},async register(e,t){try{let n=await fetch(`${g}/register`,{method:`POST`,headers:{"Content-Type":`application/json`},body:JSON.stringify({email:e,password:t})}),r=await n.json();return n.ok?(this._saveSession(r.token,r.user),await v(),{success:!0}):{success:!1,error:r.error||`Error al registrarse`}}catch(e){return console.error(`Register error:`,e),{success:!1,error:`Error de conexi贸n`}}},logout(){s.token=null,s.user=null,s.gold=0,s.eggs=[],s.candies=[],s.stones=[],s.chigos=[],localStorage.removeItem(_)},restoreSession(){try{let e=localStorage.getItem(_);if(!e)return;let{token:t,user:n}=JSON.parse(e);t&&n&&(s.token=t,s.user=n,v())}catch(e){console.error(`Error restoring session:`,e),localStorage.removeItem(_)}},isAuthenticated(){return!!s.token&&!!s.user},updateSession(){s.token&&s.user&&localStorage.setItem(_,JSON.stringify({token:s.token,user:s.user}))},getToken(){return s.token},_saveSession(e,t){s.token=e,s.user=t,localStorage.setItem(_,JSON.stringify({token:e,user:t})),k&&k.updateProfessorBadge()}};function b(){let e={"Content-Type":`application/json`};return s.token&&(e.Authorization=`Bearer ${s.token}`),e}var x=[`set_username`,`onboarding`];function S(e,t){let n=e.user;if(!n)return!1;let r=n.current_quest_code;if(!r)return!0;let i=x.indexOf(t),a=x.indexOf(r);return i===-1?!1:a===-1?!0:i<a}var C=[`/login`,`/register`],w={"/inventory":`onboarding`,"/marketplace":`onboarding`,"/incubator":`onboarding`};const T=new class{constructor(){this.routes=new Map,this.sceneToPath=new Map,this.sceneManager=null}init(e){this.sceneManager=e,window.addEventListener(`popstate`,()=>{this.handleRoute(window.location.pathname)}),document.addEventListener(`click`,e=>{let t=e.target.closest(`a[href^='/']`);t&&(e.preventDefault(),this.navigate(t.getAttribute(`href`)))}),this.handleRoute(window.location.pathname)}register(e,t){this.routes.set(e,t),this.sceneToPath.set(t,e)}navigate(e){window.history.pushState({},``,e),this.handleRoute(e)}handleRoute(e){if(!C.includes(e)&&!y.isAuthenticated()){this.navigate(`/login`);return}if(C.includes(e)&&y.isAuthenticated()){this.navigate(`/`);return}let t=w[e];if(t&&!S(s,t)){this.navigate(`/`);return}let n=this.routes.get(e);n?this.sceneManager.goTo(n,!1):(console.warn(`Route not found: ${e}, redirecting to /`),this.navigate(`/`))}getPathByScene(e){return this.sceneToPath.get(e)}get currentPath(){return window.location.pathname}};var E=class{constructor(e=[]){this.items=e,this.currentRoute=window.location.pathname}isItemEnabled(e){return e.enabledWhen?e.enabledWhen(s):!0}render(){let e=document.createElement(`nav`);e.className=`navbar`,e.id=`main-nav`;let t=this.items.find(e=>this.isActive(e.route))||this.items[0],n=document.createElement(`div`);n.className=`navbar__title`,n.innerHTML=`<h1>${t.label}</h1>`;let r=document.createElement(`div`);return r.className=`navbar__container`,this.items.forEach(e=>{let t=this.createNavItem(e);r.appendChild(t)}),e.appendChild(n),e.appendChild(r),requestAnimationFrame(()=>{let e=r.querySelectorAll(`.navbar__item`);e.length>0&&e[Math.floor(e.length/2)].scrollIntoView({inline:`center`,behavior:`instant`})}),e}createNavItem(e){let t=document.createElement(`a`);t.href=e.route,t.className=`navbar__item`,t.dataset.route=e.route,this.isActive(e.route)&&t.classList.add(`navbar__item--active`),this.isItemEnabled(e)||t.classList.add(`navbar__item--disabled`);let n=e.badge&&e.badge>0?`<span class="navbar__badge">${e.badge>99?`99+`:e.badge}</span>`:``;return t.innerHTML=`
      <div class="navbar__icon">
        ${e.icon}
      </div>
      <span class="navbar__label">${e.label}</span>
      ${n}
    `,t.addEventListener(`click`,t=>{t.preventDefault(),this.isItemEnabled(e)&&this.navigate(e.route)}),t}isActive(e){return e===`/`?this.currentRoute===`/`:this.currentRoute.startsWith(e)}navigate(e){this.currentRoute=e,document.querySelectorAll(`.navbar__item`).forEach(e=>{let t=e.dataset.route;this.isActive(t)?e.classList.add(`navbar__item--active`):e.classList.remove(`navbar__item--active`)});let t=this.items.find(e=>this.isActive(e.route));if(t){let e=document.querySelector(`.navbar__title h1`);e&&(e.textContent=t.label)}window.dispatchEvent(new CustomEvent(`navigate`,{detail:{route:e}}))}updateItems(e){this.items=e;let t=document.querySelector(`#main-nav`);if(t){let e=this.render();t.replaceWith(e)}}updateBadge(e,t){let n=this.items.find(t=>t.route===e);n&&(n.badge=t);let r=document.querySelector(`.navbar__item[data-route="${e}"]`);if(r){let e=r.querySelector(`.navbar__badge`);if(t>0){let n=t>99?`99+`:t;e?e.textContent=n:(e=document.createElement(`span`),e.className=`navbar__badge`,e.textContent=n,r.appendChild(e))}else e&&e.remove()}}refreshEnabledStates(){this.items.forEach(e=>{let t=document.querySelector(`.navbar__item[data-route="${e.route}"]`);if(t){let n=this.isItemEnabled(e);t.classList.toggle(`navbar__item--disabled`,!n)}})}static renderHTML(e=[],t=`/`){let n=e.find(e=>e.route===`/`?t===`/`:t.startsWith(e.route))||e[0],r=e.map(e=>{let n=(e.route===`/`?t===`/`:t.startsWith(e.route))?` navbar__item--active`:``,r=e.badge&&e.badge>0?`<span class="navbar__badge">${e.badge>99?`99+`:e.badge}</span>`:``;return`
        <a href="${e.route}" class="navbar__item${n}" data-route="${e.route}">
          <div class="navbar__icon">
            ${e.icon}
          </div>
          <span class="navbar__label">${e.label}</span>
          ${r}
        </a>
      `}).join(``);return`
      <nav class="navbar" id="main-nav">
        <div class="navbar__title">
          <h1>${n?n.label:`Navbar`}</h1>
        </div>
        <div class="navbar__container">
          ${r}
        </div>
      </nav>
    `}},D=`<div id="app-layout">
    <main id="scene-outlet"></main>

    <div id="navbar-container"></div>
</div>
`,O=class{constructor(){this.renderer=new i}async init(){let e=document.createElement(`div`);e.id=`app-wrapper`,document.body.appendChild(e),await a.wrap(async()=>{await this.renderer.init(e)});let t=document.createElement(`div`);t.id=`ui-root`,t.innerHTML=D,e.appendChild(t);let n=t.querySelector(`#scene-outlet`);o.init(n,T),this.initNavbar(t),this.scheduleBadgeUpdate()}getProfessorBadge(){let e=s.user;return!e||!e.current_quest_code||e.next_quest_available_at&&Math.floor(Date.now()/1e3)<e.next_quest_available_at?0:1}initNavbar(e){this.navbar=new E([{route:`/`,label:`Dashboard`,icon:``},{route:`/inventory`,label:`Inventario`,icon:``,enabledWhen:e=>S(e,`onboarding`)},{route:`/professor`,label:`Profesor Cacho`,icon:`ゼ`,badge:this.getProfessorBadge()},{route:`/marketplace`,label:`Marketplace`,icon:``,enabledWhen:e=>S(e,`onboarding`)},{route:`/incubator`,label:`Incubadora`,icon:``,enabledWhen:e=>S(e,`onboarding`)},{route:`/chigos`,label:`Chigos`,icon:``,enabledWhen:e=>S(e,`onboarding`)},{route:`/profile`,label:`Perfil`,icon:``,enabledWhen:e=>S(e,`onboarding`)}]),e.querySelector(`#navbar-container`).appendChild(this.navbar.render())}updateProfessorBadge(){this.navbar&&this.navbar.updateBadge(`/professor`,this.getProfessorBadge()),this.scheduleBadgeUpdate()}refreshNavbar(){this.navbar&&this.navbar.refreshEnabledStates()}scheduleBadgeUpdate(){this.badgeTimer&&=(clearTimeout(this.badgeTimer),null);let e=s.user;if(!e||!e.next_quest_available_at||!e.current_quest_code)return;let t=Math.floor(Date.now()/1e3),n=e.next_quest_available_at-t;n>0&&(this.badgeTimer=setTimeout(()=>{this.updateProfessorBadge()},n*1e3))}};let k=null;async function A(){k=new O,y.restoreSession(),await k.init(),o.register(`dashboard`,()=>r(()=>import(`./DashboardScene-Dq0XPb_B.js`),__vite__mapDeps([8,9,10]),import.meta.url)),o.register(`market`,()=>r(()=>import(`./MarketplaceScene-CZLaIHO_.js`),__vite__mapDeps([11,12,9,13]),import.meta.url)),o.register(`professor`,()=>r(()=>import(`./ProfessorScene-OLP9vUyh.js`),__vite__mapDeps([14,9,15,16]),import.meta.url)),o.register(`login`,()=>r(()=>import(`./LoginScene-DnBfhSlr.js`),__vite__mapDeps([17,9,18]),import.meta.url),`/login`),o.register(`register`,()=>r(()=>import(`./RegisterScene-D7yfzxnX.js`),__vite__mapDeps([19,9,18]),import.meta.url),`/register`),o.register(`admin`,()=>r(()=>import(`./AdminScene-DKGWDW1x.js`),__vite__mapDeps([20,12,9,21]),import.meta.url),`/admin`),o.register(`inventory`,()=>r(()=>import(`./InventoryScene-ChrceyUo.js`),__vite__mapDeps([22,12,9,23]),import.meta.url)),o.register(`incubator`,()=>r(()=>import(`./IncubatorScene-BDUXUQ2h.js`),__vite__mapDeps([24,9,25]),import.meta.url)),T.init(o);let e=document.getElementById(`splash`);e&&(e.style.opacity=`0`,e.addEventListener(`transitionend`,()=>e.remove(),{once:!0}))}A();export{h as a,l as c,a as d,r as f,b as i,s as l,T as n,p as o,y as r,d as s,k as t,o as u};